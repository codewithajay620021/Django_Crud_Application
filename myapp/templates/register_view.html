{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programs - Happy Kids Play School</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="bg-lime-600 text-white font-sans">

  <!-- Navbar -->
  {% include 'header.html' %}

  <!-- Hero Section -->
  <section class="relative bg-cover bg-center h-[300px]" style="background-image: url('https://images.unsplash.com/photo-1600880292089-90a7e086ee0c?auto=format&fit=crop&w=1350&q=80');">
    <div class="bg-black bg-opacity-50 h-full flex items-center justify-center">
      <h1 class="text-white text-4xl md:text-5xl font-extrabold">Our Programs</h1>
    </div>
  </section>
<section class="max-w-5xl mx-auto px-4 py-6">
    {% if messages %}
        <div class="space-y-3">
            {% for message in messages %}
                {% if message.tags == "success" %}
                    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg" role="alert">
                        <strong class="font-bold">Success!</strong>
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% elif message.tags == "error" %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg" role="alert">
                        <strong class="font-bold">Error!</strong>
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% elif message.tags == "warning" %}
                    <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded shadow-lg" role="alert">
                        <strong class="font-bold">Warning!</strong>
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% else %}
                    <div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded shadow-lg" role="alert">
                        <strong class="font-bold">Info:</strong>
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}
</section>
  <!-- Responsive DataTable Section -->
  <section class="py-10 px-4 md:px-8 bg-white text-gray-800">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-3xl font-bold mb-6 text-center text-lime-700">Program Details</h2>

      
      <!-- Search Filter & Add Button -->
<div class="mb-4 flex flex-col sm:flex-row justify-between items-center gap-4">
  
  <!-- Search Box -->
  <input 
    type="text" 
    id="tableSearch" 
    placeholder="Search programs..." 
    class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-lime-500 focus:border-lime-500 w-full sm:w-1/3"
  >

  <!-- Add New Button -->
  <a href="{% url 'register' %}" 
     class="bg-lime-600 hover:bg-lime-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-200">
    + Add New Program
  </a>
</div>


      <div class="overflow-x-auto shadow-lg rounded-lg border border-gray-200">
        <table id="programTable" class="min-w-full divide-y divide-gray-200">
          <thead class="bg-lime-600 text-white">
            <tr>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">#</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Student Name</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Email</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Contact</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Peogram</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Image</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Notes</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Edit</th>
              <th class="px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider">Delete</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for students in student %}
            <tr class="hover:bg-lime-50">
              <td class="px-6 py-4 whitespace-nowrap">{{forloop.counter}}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{students.name}}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{students.email}}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{students.phone}}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{students.program}}</td>
              <td class="px-6 py-4 whitespace-nowrap"><img src="{{ students.photo.url }}" alt="{{students.name }}" class="w-16 h-16 object-cover rounded">
</td>
              <td class="px-6 py-4 whitespace-nowrap">{{students.notes}}</td>
              <td class="px-6 py-4 whitespace-nowrap"><a href="/edit/{{students.id}}"><i class="fa-solid fa-pen-to-square text-green-500"></i></a></td>
              <td class="px-6 py-4 whitespace-nowrap"><a href="/delete/{{students.id}}"><i class="fa-solid fa-trash-can text-red-500"></i></a></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Footer -->
  {% include 'footer.html' %}

  <!-- Filter Script -->
  <script>
    document.getElementById("tableSearch").addEventListener("keyup", function() {
      let filter = this.value.toLowerCase();
      let rows = document.querySelectorAll("#programTable tbody tr");
      rows.forEach(row => {
        let text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
      });
    });
  </script>

</body>
</html>
