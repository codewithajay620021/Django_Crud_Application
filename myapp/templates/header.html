{% load static %}
<header class="bg-lime-700 shadow-lg fixed w-full z-50">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="/" class="text-2xl font-bold text-white">Happy Kids</a>

    <!-- Mobile toggle -->
    <button id="menuBtn"
            class="text-white md:hidden focus:outline-none p-2 rounded hover:bg-lime-600"
            aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
      <span id="iconOpen" class="text-2xl leading-none">☰</span>
      <span id="iconClose" class="hidden text-2xl leading-none">✕</span>
    </button>

    <!-- Desktop Menu -->
    <nav id="menu" class="hidden md:flex space-x-6 items-center text-white">
      <a href="/" class="hover:text-yellow-300">Home</a>
      <a href="/about/" class="hover:text-yellow-300">About</a>
      <a href="/program/" class="hover:text-yellow-300">Programs</a>
      <a href="/gallery/" class="hover:text-yellow-300">Gallery</a>
      <a href="/contact/" class="hover:text-yellow-300">Contact</a>
      <a href="/login/"
         class="bg-yellow-400 text-lime-900 px-4 py-1 rounded-full font-semibold hover:bg-yellow-500 shadow-md transition">
        Login
      </a>
    </nav>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu"
       class="hidden md:hidden bg-lime-700 border-t border-lime-600 origin-top transition-all duration-200">
    <a href="/" class="block px-4 py-3 hover:bg-lime-800 text-white">Home</a>
    <a href="/about/" class="block px-4 py-3 hover:bg-lime-800 text-white">About</a>
    <a href="/program/" class="block px-4 py-3 hover:bg-lime-800 text-white">Programs</a>
    <a href="/gallery/" class="block px-4 py-3 hover:bg-lime-800 text-white">Gallery</a>
    <a href="/contact/" class="block px-4 py-3 hover:bg-lime-800 text-white">Contact</a>
    <a href="/login/"
       class="block mx-4 my-3 text-center bg-yellow-400 text-lime-900 px-4 py-2 rounded-full font-semibold hover:bg-yellow-500 shadow-md transition">
      Login
    </a>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const iconOpen = document.getElementById('iconOpen');
    const iconClose = document.getElementById('iconClose');

    function openMenu() {
      mobileMenu.classList.remove('hidden');
      menuBtn.setAttribute('aria-expanded', 'true');
      iconOpen.classList.add('hidden');
      iconClose.classList.remove('hidden');
      // Optional: lock body scroll when open
      document.body.classList.add('overflow-hidden');
    }

    function closeMenu() {
      mobileMenu.classList.add('hidden');
      menuBtn.setAttribute('aria-expanded', 'false');
      iconOpen.classList.remove('hidden');
      iconClose.classList.add('hidden');
      document.body.classList.remove('overflow-hidden');
    }

    function toggleMenu() {
      if (mobileMenu.classList.contains('hidden')) {
        openMenu();
      } else {
        closeMenu();
      }
    }

    menuBtn?.addEventListener('click', toggleMenu);

    // Close on link click
    mobileMenu.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', closeMenu);
    });

    // Close on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });

    // Close when clicking outside the menu (on large screens not needed)
    document.addEventListener('click', (e) => {
      const clickedInside = mobileMenu.contains(e.target) || menuBtn.contains(e.target);
      if (!clickedInside && !mobileMenu.classList.contains('hidden')) {
        closeMenu();
      }
    });
  });
</script>
